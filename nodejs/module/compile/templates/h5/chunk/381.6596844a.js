"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[381],{"4056":function(e,r,n){n.d(r,{"y":function(){return polyfillCoreComlib}});var o=n(2735);function Selection(){return o.createElement("view",{"style":{"width":"100%","height":"100%"}})}function Group(e){var r=e.slots;return o.createElement("view",{"style":{"width":"100%","height":"100%","overflow":"visible"}},r.content.render())}function polyfillCoreComlib(e){return e["mybricks.core-comlib.selection-1.0.0"]||(e["mybricks.core-comlib.selection-1.0.0"]={"namespace":"mybricks.core-comlib.selection","version":"1.0.0","runtime":Selection}),e["mybricks.core-comlib.group-1.0.0"]||(e["mybricks.core-comlib.group-1.0.0"]={"namespace":"mybricks.core-comlib.group","version":"1.0.0","runtime":Group}),e["mybricks.core-comlib.js-ai-1.0.0"]||(e["mybricks.core-comlib.js-ai-1.0.0"]={"namespace":"mybricks.core-comlib.js-ai","version":"1.0.0","runtime":Group}),e}},"2239":function(e,r,n){n.a(e,(async function(e,o){try{var t=n(4565),i=e([t]);t=(i.then?(await i)():i)[0];var a=n.n(t);r.Z=a(),o()}catch(e){o(e)}}))},"7381":function(e,r,n){n.a(e,(async function(e,o){try{n.r(r);var t=n(1096),i=n(2577),a=n(2735),c=n(6984),s=n(3358),l=n(7273),u=n(2239),m=n(789),p=n(4056),f=n(4680),d=n.n(f),v=n(935),g=n.n(v),h=n(1838),y=n.n(h),b=e([u]);u=(b.then?(await b)():b)[0];var S=["stamp","$taroTimestamp"],k=(0,m.rC)(),O={"message":null,"timeline":null},w=function setShareConfig(e,r){O[e]=r};function fixRouterAndDecodeParams(e){if(!e)return e;e.stamp,e.$taroTimestamp;var r=(0,t.Z)(e,S);console.log("[newParams]",JSON.parse(JSON.stringify(r)));var n=parseEncodedObject(r);return console.log("[result]",JSON.parse(JSON.stringify(n))),n}function parseEncodedObject(e){var r={};for(var n in e)if(e.hasOwnProperty(n)){var o=void 0;try{o=decodeURIComponent(e[n])}catch(e){}try{var t=JSON.parse(o);"number"==typeof t||(o=t)}catch(e){}r[n]=o}return r}function safaParse(e){var r=e;try{r=JSON.stringify(e)}catch(e){}return r}r.default=function(){var e,r,n,o,t,m,f=(0,a.useState)(!1),v=(0,i.Z)(f,2),h=v[0],b=v[1],S=(0,a.useState)((0,c.FN)().router),P=(0,i.Z)(S,1)[0],Z=(0,a.useRef)(null),J=(0,a.useRef)(!1),C=P.path.split("/").reverse()[1];n=null===(t=d()[C])||void 0===t?void 0:t.pageToJson,o=null===(m=d()[C])||void 0===m?void 0:m.pageConfig,s.ZP.useLoad((function(){k.h.render(JSON.parse(g()||"{}").pageOnLoad||{},{"comDefs":(0,p.y)(u.Z),"comInstance":y(),"ref":function ref(e){e.outputs("next",(function(e){console.log("next",e),b(!0)})),e.inputs.onLoad({"id":"","path":"","query":{}}),e.run()},"setShareConfig":w})})),s.ZP.useDidShow((function(){var e;null!==(e=o)&&void 0!==e&&e.navigationBarTitleText&&(0,l.ZT)({"title":o.navigationBarTitleText}),J.current?s.td.trigger("pageDidShow",{"path":P.path||"","query":fixRouterAndDecodeParams(P.params||{})}):J.current=!0})),s.ZP.useDidHide((function(){(0,l.ZT)({"title":" "}),s.td.trigger("pageDidHide",{"path":P.path||"","query":fixRouterAndDecodeParams(P.params||{})})})),s.ZP.useUnload((function(){var e,r;null===(e=(r=k.h).destroy)||void 0===e||e.call(r,C)})),s.ZP.useShareAppMessage((function(){if(O.message)return O.message})),s.ZP.useShareTimeline((function(){if(O.timeline)return O.timeline}));var N=k.h.render(n,{"comDefs":(0,p.y)(u.Z),"comInstance":y(),"ref":function ref(e){if(!Z.current){Z.current=e;try{var r,n,o,t=(null===(r=(0,c.FN)())||void 0===r||null===(r=r.router)||void 0===r?void 0:r.params)||{};if(t.params)try{var i=decodeURIComponent(t.params);"string"==typeof i&&0===i.indexOf("{")&&i.indexOf("}")===i.length-1&&(t=JSON.parse(i))}catch(e){}var a=fixRouterAndDecodeParams(t);a.mb_key&&(a=a.mb_key),console.log("%c [render-mpsite] %c 页面打开 ".concat(C," | open -> ").concat(safaParse(a)),"color:white;background-color:green","color:white;background-color:black"),null==e||null===(n=(o=e.inputs).open)||void 0===n||n.call(o,a)}catch(r){var s,l;console.error("open",r),null==e||null===(s=(l=e.inputs).open)||void 0===s||s.call(l,{})}}},"setShareConfig":w});return null!==(r=(((null===(e=JSON.parse(g()||"{}"))||void 0===e?void 0:e.pageOnLoad)||{}).cons||{})["_rootFrame_-onLoad"])&&void 0!==r&&r.length&&!h?null:N},o()}catch(P){o(P)}}))}}]);