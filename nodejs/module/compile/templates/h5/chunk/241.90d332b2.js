"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[241],{"1915":function(e,n,r){r.d(n,{"D":function(){return polyfillCoreComlib}});var o=r(6326);function Selection(){return o.createElement("view",{"style":{"width":"100%","height":"100%"}})}function Group(e){var n=e.slots;return o.createElement("view",{"style":{"width":"100%","height":"100%","overflow":"visible"}},n.content.render())}function polyfillCoreComlib(e){return e["mybricks.core-comlib.selection-1.0.0"]||(e["mybricks.core-comlib.selection-1.0.0"]={"namespace":"mybricks.core-comlib.selection","version":"1.0.0","runtime":Selection}),e["mybricks.core-comlib.group-1.0.0"]||(e["mybricks.core-comlib.group-1.0.0"]={"namespace":"mybricks.core-comlib.group","version":"1.0.0","runtime":Group}),e["mybricks.core-comlib.js-ai-1.0.0"]||(e["mybricks.core-comlib.js-ai-1.0.0"]={"namespace":"mybricks.core-comlib.js-ai","version":"1.0.0","runtime":Group}),e}},"9718":function(e,n,r){r.a(e,(async function(e,o){try{var t=r(9028),a=e([t]);t=(a.then?(await a)():a)[0];var i=r.n(t);n.A=i(),o()}catch(e){o(e)}}))},"8241":function(e,n,r){r.a(e,(async function(e,o){try{r.r(n);var t=r(8230),a=r(2492),i=r(6326),c=r(6214),s=r(5069),l=r(8526),u=r(9718),p=r(4690),d=r(1915),f=r(6338),m=r.n(f),v=r(4942),g=r.n(v),y=r(2585),h=r.n(y),b=e([u]);u=(b.then?(await b)():b)[0];var S=["stamp","$taroTimestamp"],k=(0,p.y_)(),A={"message":null,"timeline":null},w=function setShareConfig(e,n){A[e]=n};function fixRouterAndDecodeParams(e){if(!e)return e;e.stamp,e.$taroTimestamp;var n=(0,t.A)(e,S);console.log("[newParams]",JSON.parse(JSON.stringify(n)));var r=parseEncodedObject(n);return console.log("[result]",JSON.parse(JSON.stringify(r))),r}function parseEncodedObject(e){var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=void 0;try{o=decodeURIComponent(e[r])}catch(e){}try{var t=JSON.parse(o);"number"==typeof t||(o=t)}catch(e){}n[r]=o}return n}function safaParse(e){var n=e;try{n=JSON.stringify(e)}catch(e){}return n}n.default=function(){var e,n,r,o,t,p,f,v,y=(0,i.useState)(!1),b=(0,a.A)(y,2),S=b[0],O=b[1],D=(0,i.useState)((0,c.nI)().router),J=(0,a.A)(D,1)[0],x=(0,i.useRef)(null),C=(0,i.useRef)(!1),N=J.path.split("/").reverse()[1];r=null===(t=m()[N])||void 0===t?void 0:t.pageToJson,o=null===(p=m()[N])||void 0===p?void 0:p.pageConfig,s.Ay.useLoad((function(){k.h.render(JSON.parse(g()||"{}").pageOnLoad||{},{"comDefs":(0,d.D)(u.A),"comInstance":h(),"ref":function ref(e){e.outputs("next",(function(e){console.log("next",e),O(!0)})),e.inputs.onLoad({"id":"","path":"","query":{}}),e.run()},"setShareConfig":w})})),s.Ay.useDidShow((function(){C.current?s.kA.trigger("pageDidShow",{"path":J.path||"","query":fixRouterAndDecodeParams(J.params||{})}):C.current=!0})),s.Ay.useDidHide((function(){s.kA.trigger("pageDidHide",{"path":J.path||"","query":fixRouterAndDecodeParams(J.params||{})})})),s.Ay.useUnload((function(){var e,n;null===(e=(n=k.h).destroy)||void 0===e||e.call(n,N)})),s.Ay.useShareAppMessage((function(){if(A.message)return A.message})),console.warn("useLoad [pageConfig]",null===(f=o)||void 0===f?void 0:f.navigationBarTitleText),null!==(v=o)&&void 0!==v&&v.navigationBarTitleText&&(0,l.UP)({"title":o.navigationBarTitleText});var P=k.h.render(r,{"comDefs":(0,d.D)(u.A),"comInstance":h(),"ref":function ref(e){if(!x.current){x.current=e;try{var n,r,o,t=(null===(n=(0,c.nI)())||void 0===n||null===(n=n.router)||void 0===n?void 0:n.params)||{};if(t.params)try{var a=decodeURIComponent(t.params);"string"==typeof a&&0===a.indexOf("{")&&a.indexOf("}")===a.length-1&&(t=JSON.parse(a))}catch(e){}var i=fixRouterAndDecodeParams(t);i.mb_key&&(i=i.mb_key),console.log("%c [render-mpsite] %c 页面打开 ".concat(N," | open -> ").concat(safaParse(i)),"color:white;background-color:green","color:white;background-color:black"),null==e||null===(r=(o=e.inputs).open)||void 0===r||r.call(o,i)}catch(n){var s,l;console.error("open",n),null==e||null===(s=(l=e.inputs).open)||void 0===s||s.call(l,{})}}},"setShareConfig":w});return null!==(n=(((null===(e=JSON.parse(g()||"{}"))||void 0===e?void 0:e.pageOnLoad)||{}).cons||{})["_rootFrame_-onLoad"])&&void 0!==n&&n.length&&!S?null:P},o()}catch(O){o(O)}}))}}]);